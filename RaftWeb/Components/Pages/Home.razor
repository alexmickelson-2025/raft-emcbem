@page "/"
@rendermode InteractiveServer
@using RaftLib

<PageTitle>Home</PageTitle>

<h1>Hello, world!</h1>

Welcome to your new app.

@foreach(var node in nodes)
{
    <div>
        @node.Id
    </div>
}

<button @onclick="startSimulation">Start</button>

@code
{
    List<SimulationNode> nodes = new();
    void startSimulation()
    {
        var node1 = new Node(1);
        var node2 = new Node(2);
        var node3 = new Node(3);

        var simulation1 = new SimulationNode(node1);
        var simulation2 = new SimulationNode(node2);
        var simulation3 = new SimulationNode(node3);

        node1.nodes = [simulation2, simulation3];
        node2.nodes = [simulation1, simulation3];
        node3.nodes = [simulation1, simulation2];

        nodes  = [simulation1, simulation2, simulation3];
        StateHasChanged();
    }
}